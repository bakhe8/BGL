# SchemaLab - Ù…Ø®ØªØ¨Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

## âš ï¸ Ù„Ù…Ø§Ø°Ø§ SchemaLab Ù…Ø®ØªÙ„ÙØŸ

**SchemaLab Ù„ÙŠØ³ Ù…Ø«Ù„ DesignLab Ø£Ùˆ LogicLab.**

ØªØºÙŠÙŠØ±Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
- âŒ **ØºÙŠØ± Ø³Ù‡Ù„Ø© Ø§Ù„ØªØ±Ø§Ø¬Ø¹**
- âŒ **ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…**
- âŒ **Ù‚Ø¯ ØªÙØ³Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ø±ÙŠØ®ÙŠØ©**
- âŒ **Ù‚Ø¯ ØªÙƒØ³Ø± ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØªÙƒØ§Ù…Ù„Ø§Øª**

**Ù„Ø°Ù„Ùƒ: SchemaLab Ø£ÙƒØ«Ø± ØµØ±Ø§Ù…Ø©.**

---

## Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©

> **Ù„Ø§ ØªØºÙŠÙŠØ± ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙˆÙ† Ù…Ø±Ø­Ù„Ø© "ØªØ­ÙŠÙŠØ¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø±"**

```
ØºÙŠÙ‘Ø± Ø§Ù„Ø³Ù„ÙˆÙƒ Ø£ÙˆÙ„Ù‹Ø§ØŒ
Ø«Ù… ØºÙŠÙ‘Ø± Ø§Ù„Ù…Ù†Ø·Ù‚ØŒ
Ø«Ù… ØºÙŠÙ‘Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ
ÙˆÙ„Ø§ ØªØ¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø£Ø¨Ø¯Ù‹Ø§.
```

---

## Ù…ØªÙ‰ ØªØ³ØªØ®Ø¯Ù… SchemaLabØŸ

### âœ… Ø§Ø³ØªØ®Ø¯Ù… SchemaLab Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø±Ø§Ø± ÙŠØªØ¶Ù…Ù†:

- [ ] Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø¬Ø¯ÙŠØ¯
- [ ] Ø­Ø°Ù Ø­Ù‚Ù„ Ù…ÙˆØ¬ÙˆØ¯
- [ ] ØªØºÙŠÙŠØ± Ù…Ø¹Ù†Ù‰ Ù‚ÙŠÙ…Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯
- [ ] Ø¥Ø¹Ø§Ø¯Ø© ØªØ·Ø¨ÙŠØ¹ / Ø¯Ù…Ø¬ Ø¬Ø¯Ø§ÙˆÙ„
- [ ] ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©
- [ ] ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø¨ÙŠØ§Ù†Ø§Øª (type)
- [ ] ØªØºÙŠÙŠØ± constraints (null, unique, etc)

**Ø¥Ø°Ø§ Ø£Ø¬Ø¨Øª Ø¨Ù€ "Ù†Ø¹Ù…" Ø¹Ù„Ù‰ Ø£ÙŠ Ø³Ø¤Ø§Ù„ â†’ SchemaLab Ø¥Ù„Ø²Ø§Ù…ÙŠ**

### âŒ Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… SchemaLab Ø¥Ø°Ø§:

- ØªØºÙŠÙŠØ± Ù…Ù†Ø·Ù‚ Ø¨Ø¯ÙˆÙ† Ù…Ø³ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â†’ `LogicLab`
- ØªØºÙŠÙŠØ± UI ÙÙ‚Ø· â†’ `DesignLab`
- Ø¥Ø¶Ø§ÙØ© feature flag â†’ `LogicLab`

---

## Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©

```
schema-lab/
â”œâ”€â”€ README.md              â† Ø§Ù„Ø¨ÙˆØµÙ„Ø© (Ø£Ù†Øª Ù‡Ù†Ø§)
â”œâ”€â”€ impact/                â† Schema Impact Analysis
â”œâ”€â”€ migration-plans/       â† Ø®Ø·Ø· Ø§Ù„ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ø¢Ù…Ù†
â”œâ”€â”€ simulations/           â† Ù…Ø­Ø§ÙƒØ§Ø© Dual-Write/Read
â”œâ”€â”€ dual-phases/           â† ØªÙˆØ«ÙŠÙ‚ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬
â””â”€â”€ decisions/             â† Ù‚Ø±Ø§Ø±Ø§Øª Schema (Ø£Ø®Ø·Ø± Ù…Ù† Logic)
```

### 1. impact/ - ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Schema

**Ø§Ù„Ù‡Ø¯Ù:** ÙØµÙ„ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

**Ù…Ø­ØªÙˆÙ‰:**
- Current Schema (ÙƒÙ…Ø§ Ù‡Ùˆ)
- Proposed Change (Ù…Ø§ Ø³ÙŠØªØºÙŠØ±)
- Why (Ù„Ù…Ø§Ø°Ø§ØŸ)
- Affected Areas (API, Reports, UI)
- Risk Level (ðŸŸ¢ ðŸŸ¡ ðŸ”´)

**âš ï¸ Ø¨Ø¯ÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù â†’ Ù„Ø§ ØªÙ†ÙÙŠØ°**

### 2. migration-plans/ - Ø®Ø·Ø· Ø§Ù„ØªØ±Ø­ÙŠÙ„

**Ø§Ù„Ù‡Ø¯Ù:** Ø®Ø·Ø© ØªÙ†ÙÙŠØ° Ù…Ø±Ø­Ù„ÙŠØ© (Ù„ÙŠØ³Øª ÙƒÙˆØ¯ Ø¨Ø¹Ø¯)

**Ù…Ø­ØªÙˆÙ‰:**
- Phase 1: Ø¥Ø¶Ø§ÙØ©
- Phase 2: ØªØ´ØºÙŠÙ„ Ù…Ø²Ø¯ÙˆØ¬
- Phase 3: Cutover
- Phase 4: Cleanup

**âš ï¸ ÙƒÙ„ Phase Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥ÙŠÙ‚Ø§Ù**

### 3. simulations/ - Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©

**Ø§Ù„Ù‡Ø¯Ù:** Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Dual-Write/Read

**Ù…Ø­ØªÙˆÙ‰:**
- ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬Ø©ØŸ
- ÙƒÙŠÙ ØªÙÙ‚Ø±Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ
- Ù…Ø§Ø°Ø§ Ù„Ùˆ ÙØ´Ù„Øª Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŸ
- ÙƒÙŠÙ ÙŠØªÙ… RollbackØŸ

### 4. dual-phases/ - Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬

**Ø§Ù„Ù‡Ø¯Ù:** ØªÙˆØ«ÙŠÙ‚ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© Ø§Ù†ØªÙ‚Ø§Ù„ÙŠØ©

**Ù…Ø­ØªÙˆÙ‰:**
- Phase log
- Metrics
- Issues found
- Rollback triggers

### 5. decisions/ - Ù‚Ø±Ø§Ø±Ø§Øª Schema

**Ø§Ù„Ù‡Ø¯Ù:** Ù‚Ø±Ø§Ø±Ø§Øª Ø£Ø®Ø·Ø± Ù…Ù† Logic Decisions

**Ù…Ø­ØªÙˆÙ‰:**
- Schema Decision Record (SDR-XXX)
- Ø£ÙƒØ«Ø± ØµØ±Ø§Ù…Ø© Ù…Ù† DR
- ÙŠØªØ·Ù„Ø¨ Ù…ÙˆØ§ÙÙ‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

---

## Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ù† Ø§Ù„ÙÙƒØ±Ø© Ù„Ù„ØªÙ†ÙÙŠØ°)

```
DesignLab (DF-001)
   â†“ discovers need
LogicLab (logic analysis)
   â†“ realizes schema change needed
SchemaLab (schema analysis)
   â†“ creates migration plan
Decision Record (SDR-XXX)
   â†“ approved with conditions
Safe Migration (Phase 1-4)
   â†“ dual-write/read
Cutover
   â†“ switch to new
Cleanup (after weeks)
   â†“ remove old
```

**Ù„Ø§ Ø®Ø·ÙˆØ© ØªÙØªØ®Ø·Ù‰.**

---

## ØªØµÙ†ÙŠÙ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª (Risk Levels)

### ðŸŸ¢ Type 1: Additive (Ø§Ù„Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹)

**Ù…Ø§ Ù‡Ùˆ:**
- Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯
- Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙˆØ¯ nullable
- Ø¥Ø¶Ø§ÙØ© index

**Ù„Ù…Ø§Ø°Ø§ Ø¢Ù…Ù†:**
- Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
- Ø³Ù‡Ù„ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ (Ø­Ø°Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯)
- Ù„Ø§ ÙŠÙƒØ³Ø± Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…

**Ù…Ø«Ø§Ù„:**
```sql
ALTER TABLE imported_records 
ADD COLUMN decision_source TEXT DEFAULT 'manual';
```

**Rollback:**
```sql
ALTER TABLE imported_records 
DROP COLUMN decision_source;
```

---

### ðŸŸ¡ Type 2: Dual-Phase (ÙŠØ­ØªØ§Ø¬ Ø­Ø°Ø±)

**Ù…Ø§ Ù‡Ùˆ:**
- Ø¹Ù…ÙˆØ¯ Ø¬Ø¯ÙŠØ¯ ÙŠØ­Ù„ Ù…Ø­Ù„ Ù‚Ø¯ÙŠÙ…
- ØªØºÙŠÙŠØ± Ù…Ø¹Ù†Ù‰ Ù‚ÙŠÙ…Ø©
- Ø¥Ø¹Ø§Ø¯Ø© Ù‡ÙŠÙƒÙ„Ø©

**Ù„Ù…Ø§Ø°Ø§ Ø®Ø·Ø±:**
- ÙŠØ­ØªØ§Ø¬ Dual-Write
- Ù‚Ø¯ ÙŠØ±Ø¨Ùƒ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†
- ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø©

**Ù…Ø«Ø§Ù„:**
```sql
-- Phase 1: Add new
ALTER TABLE records ADD COLUMN status_v2 TEXT;

-- Phase 2: Dual-write (ÙÙŠ Ø§Ù„ÙƒÙˆØ¯)
-- write to both status and status_v2

-- Phase 3: Cutover
-- read from status_v2 only

-- Phase 4: Cleanup (Ø¨Ø¹Ø¯ Ø£Ø³Ø§Ø¨ÙŠØ¹)
ALTER TABLE records DROP COLUMN status;
```

**Rollback:** Ù…Ù…ÙƒÙ† ÙÙŠ Phase 1-2ØŒ ØµØ¹Ø¨ ÙÙŠ Phase 3-4

---

### ðŸ”´ Type 3: Destructive (Ø§Ù„Ø£Ø®Ø·Ø±)

**Ù…Ø§ Ù‡Ùˆ:**
- Ø­Ø°Ù Ø¹Ù…ÙˆØ¯
- ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø¨ÙŠØ§Ù†Ø§Øª (type)
- Ø­Ø°Ù Ø¬Ø¯ÙˆÙ„

**Ù„Ù…Ø§Ø°Ø§ Ø®Ø·Ø± Ø¬Ø¯Ø§Ù‹:**
- Ù‚Ø¯ ÙŠÙÙ‚Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª
- ØµØ¹Ø¨ Ø§Ù„ØªØ±Ø§Ø¬Ø¹
- Ù‚Ø¯ ÙŠÙƒØ³Ø± Ø£Ø´ÙŠØ§Ø¡ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©

**Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©:**
> **Ù„Ø§ Ø­Ø°Ù ÙˆÙ„Ø§ ØªØºÙŠÙŠØ± Ù…Ø¹Ù†Ù‰ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ÙØªØ±Ø© ØªØ´ØºÙŠÙ„ Ù…Ø²Ø¯ÙˆØ¬Ø©**

**Ù…Ø«Ø§Ù„ (Ù…Ù…Ù†ÙˆØ¹ Ù…Ø¨Ø§Ø´Ø±Ø©):**
```sql
-- âŒ NEVER do this directly
ALTER TABLE records DROP COLUMN old_field;
```

**Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:**
1. Stop writing to `old_field` (feature flag)
2. Monitor for 2 weeks
3. Verify no reads from `old_field`
4. Backup database
5. Then (and only then): DROP

---

## Dual-Write / Dual-Read Strategy

### Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

**Ø®Ù„Ø§Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„:**
- Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙƒØªØ¨ ÙÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ… **Ùˆ** Ø§Ù„Ø¬Ø¯ÙŠØ¯
- Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ‚Ø±Ø£ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø¥Ù† ÙˆÙØ¬Ø¯)ØŒ ÙˆØ¥Ù„Ø§ Ù…Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…

**Ø§Ù„ÙØ§Ø¦Ø¯Ø©:**
- Ù„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª ØªÙÙÙ‚Ø¯
- Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø³Ù‡Ù„
- Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ØªØ¯Ø±ÙŠØ¬ÙŠ

### Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ:

```php
// Phase 1: Dual-Write
function saveDecision($data) {
    // Write to OLD field (for backward compat)
    $this->db->query("UPDATE records SET confirmed = ?", [$data['confirmed']]);
    
    // Write to NEW field (for future)
    if (columnExists('decision_source')) {
        $this->db->query("UPDATE records SET decision_source = ?", [$data['source']]);
    }
}

// Phase 2: Dual-Read (prefer new)
function getDecision($id) {
    $record = $this->db->query("SELECT * FROM records WHERE id = ?", [$id]);
    
    if (!empty($record['decision_source'])) {
        // New field exists and has value â†’ use it
        return mapFromNewSchema($record);
    } else {
        // Fallback to old field
        return mapFromOldSchema($record);
    }
}

// Phase 3: New-only (after cutover)
function getDecision($id) {
    $record = $this->db->query("SELECT * FROM records WHERE id = ?", [$id]);
    return mapFromNewSchema($record); // No fallback
}

// Phase 4: Cleanup (remove old column)
// ALTER TABLE records DROP COLUMN confirmed;
```

---

## Checklist Ù‚Ø¨Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°

### Schema Impact Analysis

- [ ] Ù‡Ù„ ØªÙ… ØªÙˆØ«ÙŠÙ‚ Current SchemaØŸ
- [ ] Ù‡Ù„ ØªÙ… ØªÙˆØ«ÙŠÙ‚ Proposed ChangeØŸ
- [ ] Ù‡Ù„ ØªÙ… ØªØ­Ø¯ÙŠØ¯ Affected AreasØŸ
- [ ] Ù‡Ù„ ØªÙ… ØªØµÙ†ÙŠÙ Risk LevelØŸ

### Migration Plan

- [ ] Ù‡Ù„ Ø§Ù„Ø®Ø·Ø© Ù…Ù‚Ø³Ù…Ø© Ù„Ù…Ø±Ø§Ø­Ù„ØŸ
- [ ] Ù‡Ù„ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥ÙŠÙ‚Ø§ÙØŸ
- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Rollback plan Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©ØŸ
- [ ] Ù‡Ù„ Ø§Ù„ØªØ±ØªÙŠØ¨ ØµØ­ÙŠØ­ØŸ (Add â†’ Dual â†’ Cutover â†’ Cleanup)

### Safety Measures

- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Backup Ù‚Ø¨Ù„ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©ØŸ
- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ MonitoringØŸ
- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Feature FlagsØŸ
- [ ] Ù‡Ù„ ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± RollbackØŸ

### Approval

- [ ] Ù‡Ù„ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ù† Schema Decision RecordØŸ
- [ ] Ù‡Ù„ reviewers ÙÙ‡Ù…ÙˆØ§ Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŸ
- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ timeline ÙˆØ§Ø¶Ø­ØŸ
- [ ] Ù‡Ù„ Ù‡Ù†Ø§Ùƒ success criteriaØŸ

---

## Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù‚Ø¨Ù„ Ø£ÙŠ ØªÙ†ÙÙŠØ°

1. **Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¨Ø¯ÙˆÙ† ÙÙ‚Ø¯ Ø¨ÙŠØ§Ù†Ø§ØªØŸ**
   - âœ… Ù†Ø¹Ù… â†’ Ø§Ø³ØªÙ…Ø±
   - âŒ Ù„Ø§ â†’ Ø£Ø¹Ø¯ Ø§Ù„ØªÙÙƒÙŠØ±

2. **Ù‡Ù„ Ø§Ù„ØªØºÙŠÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ø£Ù… ÙƒØ³Ø±ÙŠØŸ**
   - ðŸŸ¢ Ø¥Ø¶Ø§ÙÙŠ â†’ Ø£Ù‚Ù„ Ø®Ø·ÙˆØ±Ø©
   - ðŸ”´ ÙƒØ³Ø±ÙŠ â†’ Ø§Ø­Ø°Ø±

3. **Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ØªØ´ØºÙŠÙ„ Ù…Ø²Ø¯ÙˆØ¬ØŸ**
   - âœ… Ù†Ø¹Ù… â†’ Ø¢Ù…Ù†
   - âŒ Ù„Ø§ â†’ Ù„Ù…Ø§Ø°Ø§ØŸ

4. **Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ù…Ø±Ø§Ù‚Ø¨Ø©ØŸ**
   - âœ… Ù†Ø¹Ù… â†’ Ø¬ÙŠØ¯
   - âŒ Ù„Ø§ â†’ Ø£Ø¶ÙÙ‡Ø§

5. **Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Cleanup planØŸ**
   - âœ… Ù†Ø¹Ù… â†’ Ù…Ù…ØªØ§Ø²
   - âŒ Ù„Ø§ â†’ Ø§ÙƒØªØ¨Ù‡ Ø§Ù„Ø¢Ù†

**âŒ Ø¥Ø°Ø§ ÙØ´Ù„ Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ â†’ ÙŠÙØ¤Ø¬Ù„ Ø§Ù„Ù‚Ø±Ø§Ø±**

---

## Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
DesignLab     â†’ ÙŠÙƒØªØ´Ù Ù…Ø´Ø§ÙƒÙ„ UX
   â†“
LogicLab      â†’ ÙŠÙÙƒØ± ÙÙŠ Ø­Ù„ÙˆÙ„ Ù…Ù†Ø·Ù‚ÙŠØ©
   â†“ (realizes schema change needed)
SchemaLab     â†’ ÙŠØ®Ø·Ø· Ù„ØªØºÙŠÙŠØ± Ø¢Ù…Ù† Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
   â†“
logic-impact  â†’ ÙŠÙˆØ«Ù‚ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„
   â†“
Decision (SDR) â†’ Ù‚Ø±Ø§Ø± Ø£ÙƒØ«Ø± ØµØ±Ø§Ù…Ø©
   â†“
backend/changes â†’ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø±Ø­Ù„ÙŠ
```

---

## Ù…Ø«Ø§Ù„ Ø­ÙŠ: Quick Decision + decision_source

Ø±Ø§Ø¬Ø¹:
- `impact/decision-source-field.md` - ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
- `migration-plans/add-decision-source.md` - Ø®Ø·Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ©
- `simulations/dual-write-decision-source.md` - Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©
- `decisions/SDR-001-decision-source.md` - Ø§Ù„Ù‚Ø±Ø§Ø±

---

## Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† SchemaLab Ùˆ LogicLab

| Aspect | LogicLab | SchemaLab |
|--------|----------|-----------|
| **Focus** | Business logic | Database structure |
| **Risk** | Medium | High |
| **Rollback** | Easy (feature flag) | Hard (data involved) |
| **Duration** | Days | Weeks/Months |
| **Phases** | 2-3 | 4+ (always) |
| **Approval** | DR-XXX | SDR-XXX (stricter) |

---

## Ù…ØªÙ‰ ÙŠÙØºÙ„Ù‚ SchemaLab ExperimentØŸ

### Scenario 1: Ù†Ø¬Ø­ Ø§Ù„ØªÙ†ÙÙŠØ° âœ…

```markdown
## Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©

### decision_source Field
- **Status:** âœ… Deployed & Cleaned
- **Started:** 2025-12-21
- **Cutover:** 2026-01-15
- **Cleanup:** 2026-02-01
- **Outcome:** Zero data loss, smooth migration
```

### Scenario 2: ÙØ´Ù„ ÙÙŠ Phase 2 âŒ

```markdown
### status_v2 Migration
- **Status:** âŒ Rolled Back
- **Phase Reached:** Dual-Write
- **Reason:** Performance degradation
- **Lessons:** Indexing needed first
- **Rollback:** Complete, no data loss
```

---

## Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠØ© (Iron Rules)

1. **Ù„Ø§ Ø­Ø°Ù Ù…Ø¨Ø§Ø´Ø±** - Ø¯Ø§Ø¦Ù…Ø§Ù‹ Dual-Phase Ø£ÙˆÙ„Ø§Ù‹
2. **Ù„Ø§ ØªØºÙŠÙŠØ± Ù…Ø¹Ù†Ù‰** - Ø£Ø¶Ù Ø¬Ø¯ÙŠØ¯ØŒ Ø§ØªØ±Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…
3. **Backup Ù‚Ø¨Ù„ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©** - Ù„Ø§ Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
4. **Monitoring Ø¥Ù„Ø²Ø§Ù…ÙŠ** - Ø±Ø§Ù‚Ø¨ ÙƒÙ„ Ø´ÙŠØ¡
5. **Cleanup Ù…ØªØ£Ø®Ø±** - Ø£Ø³Ø§Ø¨ÙŠØ¹ØŒ Ù„ÙŠØ³ Ø£ÙŠØ§Ù…

---

## Ø§Ù„Ø®Ù„Ø§ØµØ© (Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©)

> **SchemaLab Ù‡Ùˆ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø°ÙŠ Ù†ÙØ­Ø¶Ù‘Ø± ÙÙŠÙ‡ ØªØºÙŠÙŠØ±Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù‚Ø© Ø¬Ø±Ø§Ø­ØŒ  
> Ù„Ø£Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø§ ØªÙØ¹ÙˆÙ‘Ø¶ØŒ  
> ÙˆØ§Ù„ØªØ±Ø§Ø¬Ø¹ Ù„ÙŠØ³ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ù…ÙƒÙ†Ø§Ù‹.**

---

**Next:** Ø±Ø§Ø¬Ø¹ `impact/` Ù„Ø¨Ø¯Ø¡ Ø£ÙˆÙ„ ØªØ­Ù„ÙŠÙ„ Schema
