# Data Layer Architecture

**Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„ÙˆØ­ÙŠØ¯ ÙÙŠ BGL**

---

## Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

```
Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø§ "ØªØ¹ÙŠØ´" Ø¯Ø§Ø®Ù„ Ø£ÙŠ Lab.

Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø¨ÙŠØ§Ù†Ø§ØªØŒ
Ø¨Ù„ ØªØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¨Ø± Ø·Ø¨Ù‚Ø© Ù…Ø´ØªØ±ÙƒØ© Ù…Ø­Ø§ÙŠØ¯Ø©.
```

---

## Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ DesignLab   â”‚
                â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ LogicLab    â”‚
                â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ SchemaLab   â”‚
                â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Data Layer   â”‚ â† Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©ØŒ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª Ø­ÙˆÙ„Ù‡Ø§ â€” Ù„Ø§ Ø¯Ø§Ø®Ù„Ù‡Ø§.**

---

## Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ

### Production Data Layer

```
data/
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ app.sqlite              â† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
â”‚   â””â”€â”€ schemas/                â† Schema definitions
â”‚       â”œâ”€â”€ current/            â† Ø§Ù„Ù€ schema Ø§Ù„Ø­Ø§Ù„ÙŠ
â”‚       â””â”€â”€ migrations/         â† ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
â”‚
â””â”€â”€ files/                      â† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø©
    â”œâ”€â”€ guarantees/             â† Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø¶Ù…Ø§Ù†Ø§Øª
    â””â”€â”€ invoices/               â† Ø§Ù„ÙÙˆØ§ØªÙŠØ±
```

**Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©:** Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª **Ù…Ù‚Ø¯Ø³Ø©** - Ù„Ø§ ØªÙØ¹Ø¯Ù‘Ù„ Ø¥Ù„Ø§ Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø³Ù…ÙŠ

---

### Test Data (Ù…Ù†ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹)

```
test-data/
â”œâ”€â”€ fixtures/                   â† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ø«Ø§Ø¨ØªØ©
â”‚   â”œâ”€â”€ sample-records.json     â† Ø³Ø¬Ù„Ø§Øª Ù†Ù…ÙˆØ°Ø¬ÙŠØ©
â”‚   â”œâ”€â”€ test-scenarios.sql      â† Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª SQL
â”‚   â””â”€â”€ ai-recommendations.json â† ØªÙˆØµÙŠØ§Øª AI Ù…Ø­Ø§ÙƒØ§Ø©
â”‚
â””â”€â”€ mocks/                      â† Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø§ÙƒØ§Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
    â”œâ”€â”€ api-responses.json
    â””â”€â”€ user-inputs.json
```

**Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©:** Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª **Ù…Ø¤Ù‚ØªØ©** - Ù„Ù„ØªØ¬Ø§Ø±Ø¨ ÙÙ‚Ø·ØŒ ØªÙØ­Ø°Ù Ø¯ÙˆÙ† Ø®ÙˆÙ

---

## ÙƒÙŠÙ ØªØªØ¹Ø§Ù…Ù„ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ

### DesignLab ðŸŽ¨

**Ø§Ù„ÙˆØµÙˆÙ„:**
```php
// design-lab/core/DataAccess.php
class LabDataAccess {
    // READ-ONLY Ù…Ù† Production
    public function getRecords() {
        return Database::connect()->query(
            "SELECT * FROM imported_records"
        );
    }
    
    // ÙŠÙ…Ù†Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø© ØµØ±Ø§Ø­Ø©
    public function blockWrites() {
        throw new Exception("Lab mode is read-only");
    }
}
```

**Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:**
- âœ… ÙŠÙ‚Ø±Ø£ Ù…Ù† `data/database/app.sqlite` (read-only)
- âœ… ÙŠØ³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ù…Ø­Ø§ÙƒØ§Ø©
- âŒ Ù„Ø§ ÙŠÙƒØªØ¨ **Ø£Ø¨Ø¯Ø§Ù‹** ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
- âœ… ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… `test-data/fixtures/` Ù„Ù„ØªØ·ÙˆÙŠØ±

**Ø§Ù„Ù‡Ø¯Ù:** ÙƒÙŠÙ ØªØ¸Ù‡Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ù„ ØªÙØ±Ø¨Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ

---

### LogicLab ðŸ§ 

**Ø§Ù„ÙˆØµÙˆÙ„:**
```php
// Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ - ØªØ­Ù„ÙŠÙ„ ÙÙ‚Ø·
// ÙŠØ³ØªØ®Ø¯Ù…:
// - Snapshots Ù…Ù† data/database/
// - Simulated inputs Ù…Ù† test-data/
```

**Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:**
- âœ… ÙŠÙ‚Ø±Ø£ schema Ù…Ù† `data/database/schemas/current/`
- âœ… ÙŠØ­Ø§ÙƒÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… `test-data/fixtures/`
- âŒ Ù„Ø§ ÙŠØªÙØ§Ø¹Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
- âœ… ÙƒÙ„ Ø´ÙŠØ¡ pseudo-code Ø£Ùˆ ØªÙˆØ«ÙŠÙ‚

**Ø§Ù„Ù‡Ø¯Ù:** Ù…Ø§Ø°Ø§ Ù†ÙØ¹Ù„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ ÙƒÙŠÙ Ù†ØªØ®Ø° Ù‚Ø±Ø§Ø±Ù‹Ø§ØŸ

---

### SchemaLab ðŸ—„ï¸

**Ø§Ù„ÙˆØµÙˆÙ„:**
```sql
-- ÙŠÙ‚Ø±Ø£ schema Ø§Ù„Ø­Ø§Ù„ÙŠ
PRAGMA table_info(imported_records);

-- ÙŠØ®Ø·Ø· Ù„ØªØºÙŠÙŠØ±Ø§Øª (Ù„Ø§ ÙŠÙ†ÙØ°Ù‡Ø§)
-- ÙŠÙˆØ«Ù‚ ÙÙŠ schema-lab/migration-plans/
```

**Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:**
- âœ… ÙŠÙ‚Ø±Ø£ Ù…Ù† `data/database/schemas/current/`
- âœ… ÙŠØ®Ø·Ø· migrations ÙÙŠ `schema-lab/migration-plans/`
- âŒ Ù„Ø§ ÙŠÙ†ÙØ° migrations Ù…Ø¨Ø§Ø´Ø±Ø©
- âœ… Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ¹Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙÙ‚Ø·

**Ø§Ù„Ù‡Ø¯Ù:** ÙƒÙŠÙ Ù†Ø®Ø²Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø£Ù…Ø§Ù†ØŸ ÙƒÙŠÙ Ù†ØºÙŠÙ‘Ø± SchemaØŸ

---

## Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ…ÙˆØ¶Ø¹Ù‡Ø§

### 1. Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Inputs)

**Ø£Ù…Ø«Ù„Ø©:**
- Ù‚ÙŠÙ… Ù…Ù† Excel
- Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø¯Ø®Ø§Ù„
- JSON Ù…Ù† API

**Ø§Ù„Ù…ÙˆØ¶Ø¹:**
```
ØªØ¯Ø®Ù„ Ø¹Ø¨Ø±: app/Controllers/ImportController.php
   â†“
ØªÙØ¹Ø§Ù„Ø¬ ÙÙŠ: app/Services/ImportService.php
   â†“
ØªÙØ®Ø²Ù† ÙÙŠ: data/database/app.sqlite
```

**ÙÙŠ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª:**
- DesignLab: ÙŠØ¹Ø±Ø¶ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
- LogicLab: ÙŠØ®ØªØ¨Ø± logic Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
- SchemaLab: ÙŠÙ‚Ø±Ø± ÙƒÙŠÙ ØªÙØ®Ø²Ù†

**ðŸ“Œ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ù†ÙØ³Ù‡Ø§ Ù„Ø§ ØªÙØ®Ø²Ù† ÙÙŠ Lab**

---

### 2. Ø§Ù„Ù…Ù„ÙØ§Øª (Files)

**Ø£Ù…Ø«Ù„Ø©:**
- PDF Ø¶Ù…Ø§Ù†Ø§Øª
- ØµÙˆØ± ÙÙˆØ§ØªÙŠØ±
- Excel sheets
- Ù…Ø®Ø±Ø¬Ø§Øª OCR

**Ø§Ù„Ù…ÙˆØ¶Ø¹:**
```
data/files/
â”œâ”€â”€ guarantees/
â”‚   â”œâ”€â”€ 2025/
â”‚   â”‚   â””â”€â”€ 001234.pdf
â”‚   â””â”€â”€ index.json        â† metadata
â””â”€â”€ invoices/
    â””â”€â”€ 2025/
        â””â”€â”€ INV-001.pdf
```

**ÙÙŠ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª:**
```
test-data/mocks/
â”œâ”€â”€ sample-guarantee.pdf  â† Ù…Ù„ÙØ§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
â””â”€â”€ sample-invoice.pdf
```

**ðŸ“Œ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ `data/`, Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙÙŠ `test-data/`**

---

### 3. Ø§Ù„Ù†ØµÙˆØµ (Texts)

**Ø£Ù…Ø«Ù„Ø©:**
- Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
- Ù…Ù„Ø§Ø­Ø¸Ø§Øª
- Ù†ØªØ§Ø¦Ø¬ OCR
- ÙˆØµÙ Ø§Ù„Ø¶Ù…Ø§Ù†Ø§Øª

**Ø§Ù„Ù…ÙˆØ¶Ø¹:**
```sql
-- ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
CREATE TABLE imported_records (
    supplier TEXT,      â† Ù†Øµ
    notes TEXT,         â† Ù†Øµ
    ocr_result TEXT     â† Ù†Øµ
);
```

**ÙÙŠ Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª:**
- DesignLab: ÙƒÙŠÙ ØªÙØ¹Ø±Ø¶ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø·ÙˆÙŠÙ„Ø©ØŸ
- LogicLab: ÙƒÙŠÙ Ù†Ø·Ø§Ø¨Ù‚ Ø§Ù„Ù†ØµÙˆØµØŸ
- SchemaLab: TEXT vs VARCHAR - Ø£ÙŠ Ù†ÙˆØ¹ØŸ

---

## Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Backend

### Backend = Ø§Ù„Ù…Ù†ÙØ° Ø§Ù„ÙˆØ­ÙŠØ¯ Ù„Ù„ÙƒØªØ§Ø¨Ø©

```
Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª         Backend           Data Layer
    â”‚                â”‚                    â”‚
    â”‚ ÙŠØ­Ø§ÙƒÙŠ â†’        â”‚                    â”‚
    â”‚                â”‚ ÙŠÙƒØªØ¨ â†’             â”‚
    â”‚                â”‚                 [Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª]
    â”‚ ÙŠÙ‚Ø±Ø£ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:**
- Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª: Read-only Ø£Ùˆ Ù…ÙØ­Ø§ÙƒØ§Ø©
- Backend: Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø°ÙŠ **ÙŠÙƒØªØ¨**
- Data Layer: Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹

---

## Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„

### DesignLab â†’ Data Layer

```php
// design-lab/core/DataAccess.php
use App\Support\Database;  // ÙŠØ³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ø§ØªØµØ§Ù„

public function getRecords() {
    $db = Database::connect();
    return $db->query("SELECT * FROM imported_records");
}
```

**Ø§Ù„Ø§ØªØµØ§Ù„:** Ù†ÙØ³ Database class Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ Backend

---

### Backend â†’ Data Layer

```php
// app/Repositories/RecordRepository.php
use App\Support\Database;

public function create($data) {
    $db = Database::connect();
    $db->insert('imported_records', $data);
}
```

**Ø§Ù„Ø§ØªØµØ§Ù„:** Ù…Ø¨Ø§Ø´Ø±ØŒ Ù…Ø¹ write permissions

---

### SchemaLab â†’ Data Layer (Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·)

```sql
-- Ø¹Ø¨Ø± SQLite CLI Ø£Ùˆ inspection tools
sqlite3 data/database/app.sqlite

.schema imported_records
PRAGMA table_info(imported_records);
```

**Ø§Ù„Ø§ØªØµØ§Ù„:** Ù‚Ø±Ø§Ø¡Ø© schemaØŒ Ù„Ø§ ÙƒØªØ§Ø¨Ø©

---

## Test Data Strategy

### Fixtures (Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ø§Ø¨ØªØ©)

```json
// test-data/fixtures/sample-records.json
[
  {
    "id": 1,
    "supplier": "Ø´Ø±ÙƒØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
    "bank": "Ø¨Ù†Ùƒ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
    "amount": 10000,
    "match_status": "pending"
  },
  {
    "id": 2,
    "supplier": "Ø´Ø±ÙƒØ© Ù†Ù…ÙˆØ°Ø¬ÙŠØ©",
    "bank": "Ø¨Ù†Ùƒ Ù†Ù…ÙˆØ°Ø¬ÙŠ",
    "amount": 25000,
    "match_status": "approved"
  }
]
```

**Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
- Unit tests
- Development
- UI mocking

---

### Mocks (Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©)

```json
// test-data/mocks/ai-recommendations.json
{
  "record_14002": {
    "decision": "approve",
    "confidence": 0.95,
    "reasons": [
      "18 Ø­Ø§Ù„Ø© Ù…Ø´Ø§Ø¨Ù‡Ø©",
      "Ù…ÙˆØ±Ø¯ Ù…ÙˆØ«ÙˆÙ‚",
      "Ø¶Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ"
    ]
  }
}
```

**Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
- ØªØ·ÙˆÙŠØ± Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
- Ø§Ø®ØªØ¨Ø§Ø± edge cases
- Ù…Ø­Ø§ÙƒØ§Ø© AI offline

---

## Migration Strategy (ØªØ¯Ø±ÙŠØ¬ÙŠØ©)

### Phase 1: Documentation âœ… (Ø­Ø§Ù„ÙŠØ§Ù‹)
- ØªÙˆØ«ÙŠÙ‚ Data Layer architecture
- Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯Ø§Øª `data/` Ùˆ `test-data/`
- **Ù„Ø§ ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯**

### Phase 2: Schema Organization (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
```bash
# Ù†Ù‚Ù„ schema definitions
cp database/migrations/*.sql data/database/schemas/migrations/

# Ø¥Ù†Ø´Ø§Ø¡ current schema snapshot
sqlite3 storage/database/app.sqlite .schema > data/database/schemas/current/schema.sql
```

### Phase 3: Test Data Population (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
- Ø¥Ù†Ø´Ø§Ø¡ fixtures Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ù…ÙØ¬Ù‡Ù‘Ù„Ø©)
- Ø¥Ù†Ø´Ø§Ø¡ mocks Ù„Ù„Ù€ AI responses

### Phase 4: Gradual Refactor (Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹)
- Ù†Ù‚Ù„ `storage/database/` â†’ `data/database/`
- ØªØ­Ø¯ÙŠØ« paths ÙÙŠ `config/database.php`
- **ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„**

---

## Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

### âœ… Ù…Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„:

1. **Data Layer exists** (Ø¶Ù…Ù†ÙŠ):
   - `storage/database/app.sqlite`

2. **DesignLab read-only**:
   - `design-lab/core/DataAccess.php` ÙŠÙ…Ù†Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø©

3. **Backend owns writes**:
   - ÙÙ‚Ø· `app/Repositories/` ØªÙƒØªØ¨ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### ðŸ“‹ Ù…Ø§ ØªÙ… ØªÙˆØ¶ÙŠØ­Ù‡ Ø§Ù„Ø¢Ù†:

1. **Data Layer ÙˆØ§Ø¶Ø­Ø©**:
   - `data/` ÙƒØ·Ø¨Ù‚Ø© Ù…Ù†ÙØµÙ„Ø© Ù…ÙÙ‡ÙˆÙ…ÙŠØ§Ù‹

2. **Test Data Ù…Ù†ÙØµÙ„Ø©**:
   - `test-data/` Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±Ø¨

3. **Architecture Ù…ÙˆØ«Ù‚Ø©**:
   - Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ø¶Ø­Ø©
   - Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ø­Ø¯Ø¯Ø©

---

## Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠØ©

### 1. Ù„Ø§ Ù…Ù„ÙƒÙŠØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Labs

```
âŒ design-lab/data/
âœ… design-lab/ ÙŠÙ‚Ø±Ø£ Ù…Ù† data/
```

### 2. Test Data Ù…Ù†ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹

```
âŒ Ø®Ù„Ø· Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
âœ… test-data/ Ù…Ù†ÙØµÙ„Ø©ØŒ Ø¢Ù…Ù†Ø© Ù„Ù„Ø­Ø°Ù
```

### 3. Backend = Ø§Ù„ÙƒØ§ØªØ¨ Ø§Ù„ÙˆØ­ÙŠØ¯

```
âŒ Labs ØªÙƒØªØ¨ Ù…Ø¨Ø§Ø´Ø±Ø©
âœ… Labs ØªÙ‚Ø±Ø£ Ø£Ùˆ ØªÙØ­Ø§ÙƒÙŠ ÙÙ‚Ø·
```

### 4. Data Layer = Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©

```
âŒ Labs ØªØ®Ø²Ù† Ù†Ø³Ø® Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
âœ… Labs ØªÙØ´ÙŠØ± Ø¥Ù„Ù‰ Data Layer
```

---

## Ø§Ù„Ø®Ù„Ø§ØµØ© (Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©)

> **Data Layer Ù‡ÙŠ Ù…ØµØ¯Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„ÙˆØ­ÙŠØ¯ØŒ  
> Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª ØªØ¯ÙˆØ± Ø­ÙˆÙ„Ù‡Ø§ - Ù„Ø§ ØªÙ…Ù„ÙƒÙ‡Ø§ØŒ  
> ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø§ ØªØ¹ÙŠØ´ Ø¯Ø§Ø®Ù„ Ø£ÙŠ Lab.**

---

**Related:**
- `design-lab/core/DataAccess.php` - Read-only access
- `app/Support/Database.php` - Database connection
- `config/database.php` - Database configuration
