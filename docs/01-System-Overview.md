# 01 - نظرة عامة على النظام (System Overview)

## مقدمة
نظام **إدارة خطابات الضمان (BGL)** هو تطبيق ويب محلي (Self-Hosted) يهدف إلى أتمتة معالجة ومطابقة خطابات الضمان البنكية الواردة في ملفات Excel مع المصادر المعتمدة (قوائم الموردين والبنوك).

## التقنيات المستخدمة (Technology Stack)
- **Backend**: PHP 8.2 (Native, No Framework).
- **Frontend**: Vanilla JS + CSS (Responsive).
- **Database**: SQLite (ملف محلي `database.sqlite`).
- **Processing**: `shuchkin/simplexlsx` لمعالجة ملفات Excel.

## المميزات الرئيسية
1. **الاستيراد الذكي**: قراءة ملفات Excel وتحديد الأعمدة تلقائياً.
2. **محرك المطابقة (Matching Engine)**:
   - مطابقة اسم المورد مع القائمة الرسمية.
   - مطابقة اسم البنك (الاسم الكامل أو الكود المختصر).
   - استخدام خوارزميات Fuzzy Logic (Levenshtein) لتصحيح الأخطاء المطبعية.
3. **التعلم الآلي (Learning System)**: يحفظ تصحيحات المستخدم (Aliases) لتحسين الدقة مستقبلاً.
4. **السجل التاريخي (Archives)**: الاحتفاظ بجميع السجلات المستوردة كأرشيف دائم.

> [!CAUTION]
> **مفهوم جوهري (Core Concept): الموردون ليسوا كالبنوك**
> أحد أخطر الأخطاء التي يقع فيها المطورون هو افتراض أن منطق "الموردين" و "البنوك" متطابق.
> - **الموردون (Suppliers)**: يعتمدون على جدول منفصل للأسماء البديلة (`supplier_alternative_names`). المنطق مبني على "تعدد الأسماء" (One-to-Many).
> - **البنوك (Banks)**: تعتمد على أعمدة في نفس الجدول (`official_name_en`, `short_code`). المنطق مبني على "الترجمة والرموز".
> **لا تحاول توحيد المنطق بينهما برمجياً.**

## هيكلية المجلدات
- `app/`: كود الواجهة الخلفية (PHP).
- `www/`: ملفات الواجهة الأمامية (HTML/JS/CSS) ونقطة الدخول `index.php`.
- `storage/`: قاعدة البيانات، السجلات، وملفات Excel المرفوعة.
- `docs/`: وثائق النظام.
