# سياسة تأثير تحديث القاموس على السجلات باستخدام سياسة التعلّم المؤرَّخ
إصدار 1.0 — وثيقة معيارية ملزمة وقابلة للتطبيق فوراً على الوضع الحالي (بدون توسّع)

## 1. مقدمة
تحدد هذه الوثيقة سياسة رسمية لكيفية تأثير أي تعديل في القاموس (تحديث اسم، إضافة alias، تصحيح تطبيع) على السجلات داخل نظام BL، مع اعتماد التعلّم المؤرَّخ لضمان:
- ثبات السجلات القديمة وعدم تغييرها.
- تطبيق القاموس المحدث على السجلات الجديدة فقط.
- حماية التاريخ التشغيلي وعدم إدخال تعقيد جديد.

## 2. تعريف سياسة التعلّم المؤرَّخ
- تسجيل كل تعلّم/تعديل مع timestamp.
- عدم تطبيق أي تعديل رجعي على بيانات قديمة.
- استخدام أحدث التعلمات للسجلات الجديدة فقط.
- الحفاظ على المرجعية التاريخية للسجلات المنجزة.

## 3. المبادئ الأساسية
- **No Retroactive Changes**: لا تغييرات على أي سجل تمّت معالجته سابقاً.
- **Forward Only**: التحديث يبدأ من لحظة وقوعه؛ ما قبلها يبقى كما هو.
- **Versioned Learning**: كل تعلّم يسجَّل بصيغة تتضمن المصدر والنوع والقيمة ووقت التطبيق.
- **No Touch to Old Records**: لا إعادة مطابقة أو تصحيح أو تعلّم أو إعادة كتابة IDs أو aliases للسجلات السابقة.
- **Separation of Past vs Present**: السجل القديم يُقرأ كما هو دون مقارنة بالقاموس الحالي.
- **No New Complexity**: لا Wizard، لا Auto-Link، لا Recalculate، لا Hooks جديدة معقدة.

## 4. التطبيق ضمن النظام الحالي (بدون تعديل جوهري)
- عند تعديل القاموس (مورد/بنك): تسجيل التعلم بتوقيت التنفيذ في سجل التعلم (LearningLog أو ما يعادله). لا تغيير لأي سجل سابق.
- عند إضافة alias تلقائياً من قرار المراجعة: تسجيل alias مع timestamp، يُستخدم فقط في السجلات اللاحقة.
- أثناء الاستيراد: يستخدم النظام أحدث القيم المتاحة لحظة المعالجة، ويُهمل أي تعلّم أحدث من السجل قيد المعالجة.

## 5. أثر السياسة على النظام الحالي
- السجلات القديمة تبقى كما هي.
- التطابقات الجديدة تتحسن مع مرور الوقت دون تغيير النتائج القديمة.
- لا تعقيد للمستخدم؛ التعلم يجري في الخلفية.
- القاموس يمكن أن يتطور بلا خوف من كسر البيانات السابقة.
- يبقى المنطق بسيطاً دون ميزات إضافية.

## 6. ما الذي لا تفعله هذه السياسة
- لا تعيد مطابقة السجلات القديمة.
- لا تغيّر supplier_id أو bank_id القديمة.
- لا تستخدم التعلم لتعديل التاريخ.
- لا تتطلب مسارات أو واجهات جديدة.
- لا تؤدي إلى تضخم في المنطق.

## 7. أمثلة عملية
- **مثال 1**: قبل 10 ديسمبر الاسم "ABC COMPANY"، بعد 10 ديسمبر صار "ABC INTERNATIONAL COMPANY". السجلات قبل 10 ديسمبر تبقى على الاسم القديم؛ الجديدة تستخدم الاسم المحدث.
- **مثال 2**: Alias جديد بتاريخ 12 ديسمبر. سجلات 11 ديسمبر لا تتغير؛ سجلات 12 ديسمبر وما بعده تستفيد من alias الجديد.

## 8. حدود المسؤولية (مسموح/ممنوع)
- استخدام التعلم الجديد على السجلات القادمة: ✔ مسموح.
- تعديل نتائج قديمة / تأثير رجعي / إعادة مطابقة كاملة: ❌ ممنوع.
- تسجيل التعلم بتاريخ: ✔ مسموح.
- تطوير لاحق مبني على هذه السياسة: ✔ مسموح (مع الحفاظ على عدم تغيير الماضي).

## 9. الخلاصة
هذه السياسة تضمن: لا تغيير للماضي، وتطور للقاموس للمستقبل، بدون تعقيد أو توسّع في الكود. التعلّم المؤرَّخ يحفظ التاريخ الحقيقي للبيانات، ويسمح للنظام بالتطور دون المساس بالمرجعيات السابقة.
